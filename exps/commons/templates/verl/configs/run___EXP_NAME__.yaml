# 一条龙：convert → train → merge（自动用最后一次 ckpt）→ eval
# 用法: uv run python -m hardtry.run config_file=exps/__EXP_NAME__/configs/run___EXP_NAME__.yaml
# 模板占位符 __EXP_NAME__ 会在 new_exp.sh 复制时被替换为实验名。

tasks:
  - type: module
    module: hardtry.utils.convert_messages_to_verl
    config: exps/__EXP_NAME__/configs/convert_messages_to_verl_config.yaml
  - type: command
    command: ["bash", "exps/__EXP_NAME__/scripts/train_local.sh"]
  - type: command
    command: ["bash", "exps/__EXP_NAME__/scripts/merge_verl_fsdp_local.sh"]
  - type: command
    command: ["bash", "exps/__EXP_NAME__/scripts/eval_local.sh"]
